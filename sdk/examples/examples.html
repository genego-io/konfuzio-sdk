

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta content="Docstrings of the classes, methods, and functions in the source code of the konfuzio-sdk package with references to the code itself." name="description" />
<meta content="Hello World tutorial with simple example of how can the konfuzio_sdk package be used to get or post information on a project. This code snippet should provide a first insight for a quick start with the package." name="description" />
<meta content="Tutorial for how to debug Python code inside a Docker container. It uses Konfuzio SDk as example." name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Code Examples &mdash; Konfuzio  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/full_green_square.png"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Source Code Reference" href="../sourcecode.html" />
    <link rel="prev" title="Install SDK" href="../configuration_reference.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Konfuzio
          

          
            
            <img src="../../_static/docs__static_square_transparent_super_small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                v.0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">SDK</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../configuration_reference.html">Install SDK</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Code Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#hello-world-tutorial">Hello World Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="#human-in-the-loop-of-machine-learning">Human in the loop of machine learning</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-debug-python-code-inside-a-docker-container">How to debug Python code inside a Docker container</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#download-and-install-vs-code-on-your-machine">1. Download and Install VS Code on your machine</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pull-create-your-project-that-includes-the-relevant-docker-file">2. Pull/Create your project that includes the relevant Docker file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-the-remote-development-extension">3. Install the remote development extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="#set-up-your-remote-development-environment">4. Set up your remote development environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-and-run-your-docker-container">5. Build and run your Docker container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-the-python-extension-inside-the-docker-container-to-debug-and-run-python-files">6. Install the Python extension inside the Docker container to debug and run Python files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-tips">Additional Tips</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sourcecode.html">Source Code Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coordinates_system.html">Coordinates System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
</ul>
<p class="caption"><span class="caption-text">Training</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html">LabelSectionModel Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#documentmodel-examples">DocumentModel Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#design-philosophy">Design Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#tokenizers">Tokenizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#vocabularies">Vocabularies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#text-modules">Text Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#image-modules">Image Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#loading-pre-trained-modules">Loading Pre-trained Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#extraction">Extraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../training/training_documentation.html#ocr">OCR</a></li>
</ul>
<p class="caption"><span class="caption-text">Web Server</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web/api.html">Konfuzio API Video Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/api.html#konfuzio-train-ai-tutorial">Konfuzio Train AI Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/api.html#how-to-make-an-api-call">How to make an API Call</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/api.html#document-segmentation-api">Document Segmentation API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/api.html#supported-file-types">Supported file types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/on_premises.html">On-Premises Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../web/changelog_app.html">Changelog</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Konfuzio</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Code Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="code-examples">
<h1>Code Examples<a class="headerlink" href="#code-examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="hello-world-tutorial">
<h2>Hello World Tutorial<a class="headerlink" href="#hello-world-tutorial" title="Permalink to this headline">¶</a></h2>
<p>Let’s see a simple example of how can we use the <code class="docutils literal notranslate"><span class="pre">konfuzio_sdk</span></code> package to get information on a project and to post annotations.</p>
<p>You can follow the example below to post annotations of a certain word or expression in the first document uploaded.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">re</span>

<span class="kn">from</span> <span class="nn">konfuzio_sdk.data</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Annotation</span><span class="p">,</span> <span class="n">Label</span>

<span class="n">my_project</span> <span class="o">=</span> <span class="n">Project</span><span class="p">()</span>

<span class="c1"># Word/expression to annotate in the document</span>
<span class="c1"># should match an existing one in your document</span>
<span class="n">input_expression</span> <span class="o">=</span> <span class="s2">&quot;John Smith&quot;</span>

<span class="c1"># Label for the annotation</span>
<span class="n">label_name</span> <span class="o">=</span> <span class="s2">&quot;Name&quot;</span>
<span class="c1"># Creation of the Label in the project default template</span>
<span class="n">my_label</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">my_project</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">label_name</span><span class="p">)</span>
<span class="c1"># Saving it online</span>
<span class="n">my_label</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

<span class="c1"># Template where label belongs</span>
<span class="n">template_id</span> <span class="o">=</span> <span class="n">my_label</span><span class="o">.</span><span class="n">templates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span>

<span class="c1"># First document in the project</span>
<span class="n">document</span> <span class="o">=</span> <span class="n">my_project</span><span class="o">.</span><span class="n">documents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Matches of the word/expression in the document</span>
<span class="n">matches_locations</span> <span class="o">=</span> <span class="p">[(</span><span class="n">m</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">m</span><span class="o">.</span><span class="n">end</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">finditer</span><span class="p">(</span><span class="n">input_expression</span><span class="p">,</span> <span class="n">document</span><span class="o">.</span><span class="n">text</span><span class="p">)]</span>

<span class="c1"># List to save the links to the annotations created</span>
<span class="n">new_annotations_links</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Create annotation for each match</span>
<span class="k">for</span> <span class="n">offsets</span> <span class="ow">in</span> <span class="n">matches_locations</span><span class="p">:</span>
    <span class="n">annotation_obj</span> <span class="o">=</span> <span class="n">Annotation</span><span class="p">(</span>
        <span class="n">document</span><span class="o">=</span><span class="n">document</span><span class="p">,</span>
        <span class="n">document_id</span><span class="o">=</span><span class="n">document</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">start_offset</span><span class="o">=</span><span class="n">offsets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">end_offset</span><span class="o">=</span><span class="n">offsets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">label</span><span class="o">=</span><span class="n">my_label</span><span class="p">,</span>
        <span class="n">template_id</span><span class="o">=</span><span class="n">template_id</span><span class="p">,</span>
        <span class="n">accuracy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">new_annotation_added</span> <span class="o">=</span> <span class="n">annotation_obj</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">new_annotation_added</span><span class="p">:</span>
        <span class="n">new_annotations_links</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">annotation_obj</span><span class="o">.</span><span class="n">get_link</span><span class="p">())</span>

<span class="k">print</span><span class="p">(</span><span class="n">new_annotations_links</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="human-in-the-loop-of-machine-learning">
<h2>Human in the loop of machine learning<a class="headerlink" href="#human-in-the-loop-of-machine-learning" title="Permalink to this headline">¶</a></h2>
<p>The tutorial for the <em>Human in the Loop of Machine Learning</em> aims to show you how to use the
Konfuzio SDK package to include an easy feedback workflow in your training pipeline. It also gives an example of how you
can take advantage of open-source models to speed up the annotation process.</p>
<p>You can download it from
<a class="reference external" href="https://github.com/konfuzio-ai/document-ai-python-sdk/blob/master/docs/sdk/examples/human_in_the_loop.ipynb">here</a>
and try it by yourself.</p>
</div>
<div class="section" id="how-to-debug-python-code-inside-a-docker-container">
<h2>How to debug Python code inside a Docker container<a class="headerlink" href="#how-to-debug-python-code-inside-a-docker-container" title="Permalink to this headline">¶</a></h2>
<div class="section" id="download-and-install-vs-code-on-your-machine">
<h3>1. Download and Install VS Code on your machine<a class="headerlink" href="#download-and-install-vs-code-on-your-machine" title="Permalink to this headline">¶</a></h3>
<p>Either use this <a class="reference external" href="https://code.visualstudio.com/download">link</a> to download the VS Code or, if you are on Linux and have
snap installed, just run (for this tutorial v1.56.2 was used):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">snap</span> <span class="n">install</span> <span class="o">--</span><span class="n">classic</span> <span class="n">code</span>
</pre></div>
</div>
<p>If you have not already installed Docker, download and install it <a class="reference external" href="https://docs.docker.com/get-docker/">here</a>.</p>
</div>
<div class="section" id="pull-create-your-project-that-includes-the-relevant-docker-file">
<h3>2. Pull/Create your project that includes the relevant Docker file<a class="headerlink" href="#pull-create-your-project-that-includes-the-relevant-docker-file" title="Permalink to this headline">¶</a></h3>
<p>In most cases you are going to be using git, so just set up a new git-repository via the terminal, VS Code’s built-in
console or VS Code’s git extension. This project should, of course, include the Docker file that is used for deployment
and which behavior you want to mimic locally.</p>
<p>If you just want to try out how this all works, I have set up a sample repository using the Konfuzio’s SDK. You can
clone our SDK from its <a class="reference external" href="https://github.com/konfuzio-ai/document-ai-python-sdk.git">GitHub page</a>.</p>
</div>
<div class="section" id="install-the-remote-development-extension">
<h3>3. Install the remote development extension<a class="headerlink" href="#install-the-remote-development-extension" title="Permalink to this headline">¶</a></h3>
<p>In VS Code open the extensions tab (its icon is located in the left sidebar) and search <strong>Remote - Containers</strong> (or for
its ID: <em>ms-vscode-remote.remote-containers</em>). Install the extension.</p>
<!--[extensions tab](images/vscode_docker/extensions.PNG)--><a class="reference external image-reference" href="../../_static/img/vscode_docker/remote_dev_extension.png"><img alt="remote development extension" src="../../_images/remote_dev_extension.png" /></a>
</div>
<div class="section" id="set-up-your-remote-development-environment">
<h3>4. Set up your remote development environment<a class="headerlink" href="#set-up-your-remote-development-environment" title="Permalink to this headline">¶</a></h3>
<p>You should now be able to find the remote extension’s symbol (arrows on a green background) in the bottom left corner of
the VS Code window (picture below). Clicking on the symbol opens the extension’s command pallet, which from now on is
going to be our main access point to the extension.</p>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/green_arrows.png"><img alt="green arrows" src="../../_images/green_arrows.png" /></a>
<p>In the Command Pallet (<em>‘View’ &gt; ‘Command Pallet’</em>) select <em>‘Remote-Containers: Add Development Container Configuration
Files’ &gt; ‘From $your_dockerfile’</em></p>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/command_pallet.png"><img alt="command pallet" src="../../_images/command_pallet.png" /></a>
<p>Now you should see in the file explorer under <em>.devcontainer</em> your <em>devcontainer.json</em> file. Open it. These are the basic
configurations of your devcontainer. Most of this can be left unchanged. Maybe give your container a name by changing
the ‘name’ variable. Additionally, you should specify all the ports you need inside your Docker container in
‘forwardPorts’.
If you are working with the sample project you do not need to specify any ports.</p>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/devcontainer.png"><img alt="devcontainer.json" src="../../_images/devcontainer.png" /></a>
</div>
<div class="section" id="build-and-run-your-docker-container">
<h3>5. Build and run your Docker container<a class="headerlink" href="#build-and-run-your-docker-container" title="Permalink to this headline">¶</a></h3>
<p>Open the extension’s command pallet by clicking on the arrows in the bottom left and search
for <em>‘Reopen Folder in Container’</em>. If you are doing this the first time, this builds the Docker container and thus
can take quite a bit of time.</p>
<p>To confirm that you are now inside the container look again to the bottom left. You should now be able to
see <em>‘Dev Container: $your_name’</em> next to the two arrows.</p>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/green_arrows_with_text.png"><img alt="green arrows with text" src="../../_images/green_arrows_with_text.png" /></a>
</div>
<div class="section" id="install-the-python-extension-inside-the-docker-container-to-debug-and-run-python-files">
<h3>6. Install the Python extension inside the Docker container to debug and run Python files<a class="headerlink" href="#install-the-python-extension-inside-the-docker-container-to-debug-and-run-python-files" title="Permalink to this headline">¶</a></h3>
<p>Again open up the extensions tab (now inside the Docker container) and install the Python extension (ID: <em>ms-python.python</em>).</p>
<p>Now you can debug/run any Python file you want. Open up the chosen Python file and the ‘Run and Debug’ tab by clicking
the run/debug icon that should be now available on the left taskbar.</p>
<!--[run and debug tab](images/vscode_docker/run_and_debug.PNG)--><p>Click <em>‘Run and Debug’ &gt; ‘Python File’</em> and you are good to go. Before make sure to set the needed breakpoints by
clicking to the left of the line numbers.</p>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/debug_point.png"><img alt="debug point" src="../../_images/debug_point.png" /></a>
<p>If you want to evaluate certain expressions while debugging, open up the terminal (if it is not open already) by
clicking <em>‘View’ &gt; ‘Terminal’</em>. One of the terminal’s tabs is the debug console, where you can evaluate any expression.</p>
<p>If you are in the sample project you can make sure that the Docker container works as expected by entering the tests
folder (<em>‘cd tests’</em>) and executing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span> <span class="o">-</span><span class="n">m</span> <span class="n">local</span>
</pre></div>
</div>
<a class="reference external image-reference" href="../../_static/img/vscode_docker/tests.png"><img alt="tests" src="../../_images/tests.png" /></a>
</div>
<div class="section" id="additional-tips">
<h3>Additional Tips<a class="headerlink" href="#additional-tips" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>If you want to switch back to your local machine (to e.g. switch branch), open the extension’s command pallet by
clicking on the arrows and select <em>‘Reopen Folder Locally’</em>.</p></li>
<li><p>If you want to rebuild the container, because e.g. a different branch uses different dependencies, open the
extension’s command palette and click <em>‘Rebuild Container’</em>.
(This of course means that you have to reinstall the Python extension - if this becomes annoying you can specify
its ID in the devcontainer.json file to be pre-installed with every rebuild).</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../sourcecode.html" class="btn btn-neutral float-right" title="Source Code Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../configuration_reference.html" class="btn btn-neutral float-left" title="Install SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Helm und Nagel GmbH.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>